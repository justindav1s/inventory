# Git/SSH config

https://access.redhat.com/documentation/en-us/red_hat_codeready_workspaces/2.3/html-single/installation_guide/index#understanding-codeready-workspaces-server-advanced-configuration-using-the-operator_advanced-configuration-options-for-the-codeready-workspaces-server-component

3 methods

## Pregenerated SSH keys
1. Start workspace from empty devfile, this gives access to container shell
2. F1, search for ssh
3. add ssh private key
4. Point at Devfile, git clone git@github.com:justindav1s/inventory.git

## SSH Key auto generated by CRW
1. Start workspace from empty devfile, this gives access to container shell
2. Generate public key from private key : ssh-keygen -y -f /etc/ssh/private/default-*
3. Upload generated public key to git provider
4. Point at Devfile, git clone git@github.com:justindav1s/inventory.git

## Mount existing private key into container as kubernetes secret
1. Start workspace from empty devfile, creates initial user namespace
2. 
```
PROJECT=tester1-codeready
oc delete secret user-privatekey
oc create secret generic user-privatekey --from-file=id_rsa=/Users/justin/.ssh/id_rsa -n ${PROJECT}
oc label secret user-privatekey app.kubernetes.io/part-of=che.eclipse.org -n ${PROJECT}
oc label secret user-privatekey app.kubernetes.io/component=workspace-secret -n ${PROJECT}
oc annotate secret user-privatekey che.eclipse.org/automount-workspace-secret=true -n ${PROJECT}
oc annotate secret user-privatekey che.eclipse.org/mount-as=file -n ${PROJECT}
oc annotate secret user-privatekey che.eclipse.org/mount-path=/home/theia/.ssh -n ${PROJECT}

oc create secret generic user-privatekey --from-file=ssh_config=ssh_config -n ${PROJECT}
oc label secret user-privatekey app.kubernetes.io/part-of=che.eclipse.org -n ${PROJECT}
oc label secret user-privatekey app.kubernetes.io/component=workspace-secret -n ${PROJECT}
oc annotate secret user-privatekey che.eclipse.org/automount-workspace-secret=true -n ${PROJECT}
oc annotate secret user-privatekey che.eclipse.org/mount-as=file -n ${PROJECT}
oc annotate secret user-privatekey che.eclipse.org/mount-path=/home/theia/.ssh -n ${PROJECT}
```
3. restart workspace
4. Point at Devfile, git clone git@github.com:justindav1s/inventory.git
